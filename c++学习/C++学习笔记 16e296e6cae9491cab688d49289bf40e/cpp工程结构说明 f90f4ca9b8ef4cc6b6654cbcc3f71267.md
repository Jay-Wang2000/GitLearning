# cpp工程结构说明

# 一、编译过程

## 1、过程

最小编译单元：某个cpp文件

cpp文件编译顺序：编译器决定

独立编译：每个编译单元在预编译和编译过程中都相互独立

## 2、预编译：预处理cpp带有#的语句生成cpp'

预处理：将include（头文件），define（），typedefine，ifndef else（包含警戒）等转换为文本

include：头文件展开

typredefine，define：文件中的字符替换

ifndef else：头文件屏蔽

cpp'文件编译后放在内存中不需要存到外存，保证编译速度

## 3、链接:在整个程序范围内，确定标识符地址，代码段入口等

.cpp→.cpp'→.obj→.exe

## 4、make工具(文件): 记录程序修改的时间戳，从.exe→.h→.cpp文件依次寻找更新的文件重新编译后链接

## 二、主函数

命令行参数：获取在执行程序时输入的命令，arcv指示字符串个数，char*  arc[]链接具体的字符串

## 三、头文件（随操作系统或编译器发布）：系统预定义文件

### 规定：每个.cpp文件对应一个头文件，不可以多个文件撰写一个头文件，这样可能会导致头文件难以维护时比较混乱（特别是多作者）

### 1、分类

<>：先在系统目录中寻找头文件

“” ：先在工程目录中寻找头文件

#include <xx>相当于

name std{

#include "xx.h"

}

最好把系统头文件放在前面，避免自己的头文件中定义了系统头文件中的变量，导致系统头文件中某些变量结构重复定义从而报错，但是应该修改的是自己的文件

### 2、存放内容

1、外部变量，类的声明（避免函数声明中变量找不到），函数的声明；类，结构体的定义，不可以放变量和函数的定义

2、避免重复定义，同一个.cpp文件中同一头文件只出现一次

格式：在头文件中编写

#ifndef xx

#define xx

#endi

（xx是在一定区域内唯一的，则使用文件的名的大写dog.h→DOGH）

#pragma once（部分编译器不支持）

```cpp
#ifndef   _A_
#define   _A_
...
...        //A的内容
...
...
#endif    //(或者#else) 
```

![Untitled](cpp%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84%E8%AF%B4%E6%98%8E%20f90f4ca9b8ef4cc6b6654cbcc3f71267/Untitled.png)